<!-- valuation results starts -->
<!-- <div class="mydiv" style="border-top: 1px solid #e3e3f7;border-bottom:1px solid #e3e3f7;">
    <h4 class="card-header-2" style="border-top: none;">Valuation Results</h4>
    <h4 class="card-header-2" style="margin-left: auto;">Valuation Date {{transferStepperthree?.formOneAndThreeData?.valuationDate | date:'MMM d, yyyy'}}</h4>
</div> -->

<div class='c-decorated-header'>
    <h3><span style="padding-left: 2%;">Valuation Results</span></h3>
    <div class='c-decorated-header_link-view-more'>
      <a ><span>Valuation Date {{transferStepperthree?.formOneAndThreeData?.valuationDate | date:'MMM d, yyyy'}}</span></a>
    </div>
  </div>
<div class="outer-wrapper">
<div>
    <!-- <h4 class="card-header">Valuations Results</h4> -->
   <div >
    <app-valuation-result-table (formFourAppData)="formFourAppData($event)" (vwapMethod)="vwapMethod($event)" (formFourAppDataCCM)="formFourAppDataCCM($event)" [transferStepperthree]="transferStepperthree" (ccmVPSMethod)="ccmVPSMethod($event)" (terminalValueType)="terminalValueType($event)"></app-valuation-result-table>
   </div>
</div>
<!-- valuation results ends -->

<!-- modal weightage starts -->
<div *ngIf="showWeightageSection()">
    <!-- <h4 class="card-header" >Model Weightage</h4> -->
    <div class='c-decorated-header'>
        <h3><span style="padding-left: 2%;color: #868686;">Model Weightage</span></h3>
        <div class='c-decorated-header_link-view-more'>
        </div>
      </div>
    <div class="container" >
        <!-- Comparable Industries slider -->
        <div class="row" *ngIf="checkModel('CTM')">
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;">
                <p class="slider-label">Comparable Transaction</p>
            </div>
            <div class="col-md-6 t-right" style="text-align: right;border-bottom:1px  solid #d6d0d0;">
                <div class="row">
                    <div class="col-md-10">
                        <mat-slider
                            class="example-margin mat-accent"
                            [disabled]="'false'"
                            [max]="comparableIndustryMaxValue"
                            [min]="'0'"
                            [step]="'1'"
                            [discrete]="'false'"
                            [showTickMarks]="'false'"
                            style="width: 63%;"
                            (input)="modelWeightageSlider($event,'CTM',comparableIndustryMaxValue,comparableIndustrySlider)">
                            <input [(ngModel)]="comparableIndustrySlider" matSliderThumb>
                        </mat-slider>
                    </div>
                    <div class="col-md-2" style="margin-top: auto;margin-bottom: auto;text-align: left;">
                        <span class="slider-style">{{comparableIndustrySlider}}</span>
                    </div>
                </div>
                

            </div>
        </div>


            <!-- Excess earning slider -->
            <div class="row" *ngIf="checkModel('Excess_Earnings')">
            <hr class="weight-hr">
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;">
                <p class="slider-label">Excess Earning</p>
            </div>
            <div class="col-md-6 t-right" style="text-align: right;border-bottom:1px  solid #d6d0d0;">
                <div class="row">
                    <div class="col-md-10">
                        <mat-slider
                        class="example-margin mat-accent"
                        [disabled]="'false'"
                        [max]="excessEarnMaxValue"
                        [min]="'0'"
                        [step]="'1'"
                        [discrete]="'false'"
                        [showTickMarks]="'false'"
                        style="width: 63%;"
                        (input)="modelWeightageSlider($event,'Excess_Earnings',excessEarnMaxValue,excessEarnSlider)">
                        <input [(ngModel)]="excessEarnSlider" matSliderThumb>
                    </mat-slider>
                    </div>
                    <div class="col-md-2" style="margin-top: auto;margin-bottom: auto;text-align: left;">
                        <span class="slider-style" >{{excessEarnSlider}}</span>
                    </div>
                </div>
                
            </div>
        </div>

            <!-- FCFE slider -->
            <div class="row" *ngIf="checkModel('FCFE')">
                <hr class="weight-hr">
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;">
                <p class="slider-label">FCFE</p>
            </div>
            <div class="col-md-6 t-right" style="text-align: right;border-bottom:1px  solid #d6d0d0;">
                <div class="row">
                    <div class="col-md-10">
                        <mat-slider
                        class="example-margin mat-accent"
                        [disabled]="'false'"
                        [max]="fcfeMaxValue"
                        [min]="'0'"
                        [step]="'1'"
                        [discrete]="'false'"
                        [disableRipple]="true"
                        [showTickMarks]="'false'"
                        style="width: 63%;"
                        (input)="modelWeightageSlider($event,'FCFE',fcfeMaxValue,fcfeSlider)">
                        <input [(ngModel)]="fcfeSlider" matSliderThumb>
                    </mat-slider>
                    </div>
                    <div class="col-md-2" style="margin-top: auto;margin-bottom: auto;text-align: left;">
                        <span class="slider-style">{{fcfeSlider}}</span>
                    </div>
                </div>
                
            </div>
        </div>
        
        <div class="row" *ngIf="checkModel('FCFF')">
            <hr class="weight-hr">
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;">
                <p class="slider-label">FCFF</p>
            </div>
            <div class="col-md-6 t-right" style="text-align: right;border-bottom:1px  solid #d6d0d0;">
                <div class="row">
                    <div class="col-md-10">
                        <mat-slider
                            class="example-margin mat-accent"
                            [disabled]="'false'"
                            [max]="fcffMaxValue"
                            [min]="'0'"
                            [step]="'1'"
                            [discrete]="'false'"
                            [showTickMarks]="'false'"
                            style="width: 63%;"
                            (input)="modelWeightageSlider($event,'FCFF',fcffMaxValue,fcffSlider)">
                            <input [(ngModel)]="fcffSlider" matSliderThumb>
                        </mat-slider>
                    </div>
                    <div class="col-md-2" style="margin-top: auto;margin-bottom: auto;text-align: left;">
                        <span class="slider-style" >{{fcffSlider}}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Market Price -->
        <div class="row" *ngIf="checkModel('Market_Price')">
            <hr class="weight-hr">
        <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;">
            <p class="slider-label">Market Price</p>
        </div>
        <div class="col-md-6 t-right" style="text-align: right;border-bottom:1px  solid #d6d0d0;">
            <div class="row">
                <div class="col-md-10">
                    <mat-slider
                        class="example-margin mat-accent"
                        [disabled]="'false'"
                        [max]="marketPriceMaxValue"
                        [min]="'0'"
                        [step]="'1'"
                        [discrete]="'false'"
                        [showTickMarks]="'false'"
                        style="width: 63%;"
                        (input)="modelWeightageSlider($event,'Market_Price',marketPriceMaxValue,marketPriceSlider)">
                        <input [(ngModel)]="marketPriceSlider" matSliderThumb>
                    </mat-slider>
                </div>
                <div class="col-md-2" style="margin-top: auto;margin-bottom: auto;text-align: left;">
                    <span class="slider-style">{{marketPriceSlider}}</span>
                </div>
            </div>
        </div>
    </div>

            <!-- Net Asset Value -->
            <div class="row" *ngIf="checkModel('NAV')">    
                <hr class="weight-hr">
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;">
                <p class="slider-label">Net Asset value</p>
            </div>
            <div class="col-md-6 t-right" style="text-align: right;border-bottom:1px  solid #d6d0d0;">
                <div class="row">
                    <div class="col-md-10">
                        <mat-slider
                        class="example-margin mat-accent"
                        [disabled]="'false'"
                        [max]="navMaxValue"
                        [min]="'0'"
                        [step]="'1'"
                        [discrete]="'false'"
                        [disableRipple]="true"
                        [showTickMarks]="'false'"
                        style="width: 63%;"
                        (input)="modelWeightageSlider($event,'NAV',navMaxValue,navSlider)">
                        <input [(ngModel)]="navSlider" matSliderThumb>
                    </mat-slider>
                    </div>
                    <div class="col-md-2" style="margin-top: auto;margin-bottom: auto;text-align: left;">
                        <span class="slider-style">{{navSlider}}</span>
                    </div>
                </div>
                
            </div>
        </div>
            <!-- Relative Valuation slider -->
            
            <div class="row" *ngIf="checkModel('Relative_Valuation')">
                <hr class="weight-hr">
            <div class="col-md-6 text-left mt-4" style="border-bottom:1px  solid #d6d0d0;">
                <p class="slider-label">Comparable Companies</p>
            </div>
            <div class="col-md-6 t-right" style="text-align: right;border-bottom:1px  solid #d6d0d0;">
                <div class="row">
                    <div class="col-md-10">
                        <mat-slider
                            class="example-margin mat-accent"
                            [disabled]="'false'"
                            [max]="relativeValMaxValue"
                            [min]="'0'"
                            [step]="'1'"
                            [discrete]="'false'"
                            [showTickMarks]="'false'"
                            style="width: 63%;"
                            (input)="modelWeightageSlider($event,'Relative_Valuation',relativeValMaxValue,relativeValSlider)">
                            <input [(ngModel)]="relativeValSlider" matSliderThumb>
                        </mat-slider>
                    </div>
                    <div class="col-md-2" style="margin-top: auto;margin-bottom: auto;text-align: left;">
                        <span class="slider-style">{{relativeValSlider}}</span>
                    </div>
                </div>
                

            </div>
        </div>
            <!-- <hr class="weight-hr"> -->
        
    </div>
</div>
<!-- modal weightage ends -->

<!-- Model Weigtage Result starts -->
<div *ngIf="checkModelWeightageData() && data && showWeightageSection()" style="padding-top: 2%;">
<!-- <div *ngIf="data" style="padding-top: 2%;"> -->
    <!-- <h4 class="card-header" >Model Weightage Result</h4> -->
    <div class='c-decorated-header-model-weightage-table'>
        <h3><span style="padding-left: 2%;color: #868686;font-weight: 400;" >Model Weightage Result</span></h3>
        <div class='c-decorated-header_link-view-more'>
        </div>
      </div>
    <table>
        <thead>
          <tr class="header">
            <th>Model</th>
            <th>Value per share ({{transferStepperthree?.formOneAndThreeData?.currencyUnit ? transferStepperthree?.formOneAndThreeData?.currencyUnit : 'INR'}})</th>
            <th>Weights</th>
            <th>Weighted Value ({{transferStepperthree?.formOneAndThreeData?.currencyUnit ? transferStepperthree?.formOneAndThreeData?.currencyUnit : 'INR'}})</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of data" class="content">
            <td class="make-bold">{{ item.model === 'Relative_Valuation' ? 'Comparable Companies' : item.model === 'CTM' ? 'Comparable Transaction'  : item.model === 'Market_Price' ? 'Market Price' : item.model }}</td>
            <td class="make-light">{{ (item?.indicatedValue?.valuePerShareNse || item?.indicatedValue?.valuePerShareBse) || item?.indicatedValue  | currency:'INR':'symbol':'1.0-2' }}</td>
            <td class="make-light">{{ item.weight | percent:'1.0-2' }}</td>
            <td class="make-light">{{ item.weightedValue | currency:'INR':'symbol':'1.0-2' }}</td>
          </tr>
          <tr class="content">
            <td colspan="3" class="bottom-head make-blue">Weighted Value per Share ({{transferStepperthree?.formOneAndThreeData?.currencyUnit ? transferStepperthree?.formOneAndThreeData?.currencyUnit : 'INR'}})</td>
            <td class="bottom-val make-light">{{ finalWeightedValue !==0 && finalWeightedValue ? (finalWeightedValue.toFixed(2) | currency:'INR':'symbol':'1.0-2') : finalWeightedValue }}</td>
          </tr>
        </tbody>
      </table>
</div>
<!-- Model Weigtage Result ends -->

<div class="col-md-12 btn-prop">
    <button (click)="previous()" mat-raised-button class="button-back-mat">
      <span class="button-back"><mat-icon>send</mat-icon></span>
        Back
        <!-- <mat-icon>arrow_left</mat-icon> -->

    </button>

<button (click)="saveAndNext()" class="button-save-mat" mat-raised-button>
    Next
    <span class="button-save"><mat-icon>send</mat-icon></span>
 </button>
</div>
</div>

<div class="loader-overlay" *ngIf="isLoader">
    <div class="loader">
      <div class="loader-spinner"></div>
      <div class="loader-message">Please wait...</div>
    </div>
  </div>